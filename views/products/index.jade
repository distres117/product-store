extends ../layout.jade
block body
  form.form-horizontal(action='/products', method='POST')
    .form-group
      label.col-sm-2.control-label(for='nameInput') Product Name
      .col-sm-8
        input.form-control(type='text', name='name', id='nameInput')
      button.btn.btn-primary(type='submit') Add a product
    .form-group
      label.col-sm-2.control-label(for='descInput') Description
      .col-sm-10
        textarea.form-control(rows='3', name='description', id='descInput')
    .form-group
      label.col-sm-2.control-label(for='vendorInput') Vendor Name
      .col-sm-6
        select.form-control(name='vendor', id='vendorInput')
          each vendor in vendors
            option(value='#{vendor._id}')= vendor.name
  if (!noshow)
    a.pull-right(href='/products?filter=discontinued') Show active only
  else
    a.pull-right(href='/products') Show all
  each product,index in products
    .row(class=(product.status==='active' ? "" : "well"))
      img(src="http://placehold.it/75x75")
      a(href='#', data-toggle='collapse', data-target='#desc#{index}')= product.name
      form.form-inline.quantity-form(action='/products/#{product._id}?method=put', method='POST')
        .form-group
          input(type='text', id='productQuantity', name='quantity', value="#{product.quantity}")
          button.btn.btn-default(type='submit') Update # in stock
      if product.status=== 'active'
        a.btn.btn-danger(href='/products/#{product._id}?status=discontinued&method=put') Discontinue
      else
        a.btn.btn-primary(href='/products/#{product._id}?status=active&method=put') Recontinue
      .row(class='collapse', id="desc#{index}")
        span= product.description
        a.btn.btn-danger(href='/products/#{product._id}?method=delete') Delete
    
